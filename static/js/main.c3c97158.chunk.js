(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/logo.47c4581a.svg"},45:function(e,t,a){e.exports=a(77)},50:function(e,t,a){},51:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(40),o=a.n(c),r=(a(50),a(16)),i=a(2),m=a(15),u=(a(51),a(19)),s=a.n(u),p=function(e){return l.a.createElement("div",{id:"page-home"},l.a.createElement("div",{className:"content"},l.a.createElement("header",null,l.a.createElement("img",{src:s.a,alt:"Ecoleta"})),l.a.createElement("main",null,l.a.createElement("h1",null,"Seu marketplace de coleta de res\xedduos."),l.a.createElement("p",null,"Ajudamos pessoas a encontrar pontos de coleta de forma eficiente."),l.a.createElement(r.b,{to:"/create-point"},l.a.createElement("span",null,l.a.createElement(m.b,null)),l.a.createElement("strong",null,"Cadastre um ponto de coleta")))))},d=a(28),E=a.n(d),f=a(41),b=a(44),g=a(22),h=a(29),v=a(8),j=a(80),O=a(81),S=a(79),y=a(18),w=a.n(y),C=w.a.create({baseURL:"http://localhost:3333"}),N=(a(75),a(43));a(76);var k=function(e){var t=e.onFileUploaded,a=Object(n.useState)(""),c=Object(v.a)(a,2),o=c[0],r=c[1],i=Object(n.useCallback)((function(e){var a=e[0],n=URL.createObjectURL(a);r(n),t(a)}),[t]),u=Object(N.a)({onDrop:i,accept:"image/*"}),s=u.getRootProps,p=u.getInputProps;return u.isDragActive,l.a.createElement("div",Object.assign({className:"dropzone"},s()),l.a.createElement("input",Object.assign({},p(),{accept:"image/*"})),o?l.a.createElement("img",{src:o,alt:"Point thumbnail"}):l.a.createElement("p",null,l.a.createElement(m.c,null),"Imagem do estabelecimento."))},x=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),u=Object(v.a)(o,2),p=u[0],d=u[1],y=Object(n.useState)([]),N=Object(v.a)(y,2),x=N[0],F=N[1],U=Object(n.useState)([]),D=Object(v.a)(U,2),I=D[0],P=D[1],R=Object(n.useState)("0"),z=Object(v.a)(R,2),L=z[0],A=z[1],J=Object(n.useState)("0"),M=Object(v.a)(J,2),B=M[0],V=M[1],W=Object(n.useState)([0,0]),_=Object(v.a)(W,2),q=_[0],G=_[1],H=Object(n.useState)(),K=Object(v.a)(H,2),Q=K[0],T=K[1],X=Object(n.useState)({name:"",email:"",whatsapp:""}),Y=Object(v.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)(),te=Object(v.a)(ee,2),ae=te[0],ne=te[1],le=Object(i.e)();Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){console.log(e);var t=e.coords,a=t.latitude,n=t.longitude;G([a,n])}))}),[]),Object(n.useEffect)((function(){C.get("items").then((function(e){c(e.data)}))}),[a]),Object(n.useEffect)((function(){w.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados").then((function(e){var t=e.data.map((function(e){return e.sigla}));console.log(t),F(t)}))}),[]),Object(n.useEffect)((function(){"0"!==L&&w.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/".concat(L,"/municipios")).then((function(e){var t=e.data.map((function(e){return e.nome}));P(t)}))}),[L]);var ce=function(e){$(Object(h.a)(Object(h.a)({},Z),{},Object(g.a)({},e.target.name,e.target.value)))};function oe(){return(oe=Object(f.a)(E.a.mark((function e(t){var a,n,l,c,o,r,i,m,u,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(ae),console.log(t.target),a=Z.name,n=Z.email,l=Z.whatsapp,c=L,o=B,r=Object(v.a)(Q,2),i=r[0],m=r[1],u=p,(s=new FormData).append("name",a),s.append("email",n),s.append("whatsapp",l),s.append("uf",c),s.append("city",o),s.append("latitude",i),s.append("longitude",m),s.append("items",u.join(",")),ae&&s.append("image",ae),e.next=20,C.post("points",s);case 20:alert("Ponto de coleta salvo com sucesso!"),le.push("/");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.a.createElement("div",{id:"page-create-point"},l.a.createElement("header",null,l.a.createElement("img",{src:s.a,alt:"Ecoleta"}),l.a.createElement(r.b,{to:"/"},l.a.createElement(m.a,null)," Voltar para home")),l.a.createElement("form",{onSubmit:function(e){return oe.apply(this,arguments)}},l.a.createElement("h1",null,"Cadastro do ponto de coleta"),l.a.createElement(k,{onFileUploaded:ne}),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("h2",null,"Dados")),l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"name"},"Nome da entidade"),l.a.createElement("input",{type:"text",name:"name",id:"name",onChange:ce})),l.a.createElement("div",{className:"field-group"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"email"},"E-mail"),l.a.createElement("input",{type:"email",name:"email",id:"email",onChange:ce})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"whatsapp"},"Whatsapp"),l.a.createElement("input",{type:"text",name:"whatsapp",id:"whatsapp",onChange:ce})))),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("h2",null,"Endere\xe7o"),l.a.createElement("span",null,"Selecione um endere\xe7o no mapa")),l.a.createElement(j.a,{center:q,zoom:15,onClick:function(e){console.log(e.latlng),T([e.latlng.lat,e.latlng.lng])}},l.a.createElement(O.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.a.createElement(S.a,{position:Q||q})),l.a.createElement("div",{className:"field-group"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"uf"},"Estado (UF)"),l.a.createElement("select",{name:"uf",id:"uf",onChange:function(e){var t=e.target.value;console.log(t),A(t)},value:L},l.a.createElement("option",{value:"0"},"Selecione uma UF"),x.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"city"},"Cidade"),l.a.createElement("select",{value:B,name:"city",id:"city",onChange:function(e){var t=e.target.value;console.log(t),V(t)}},l.a.createElement("option",{value:""},"Selecione uma cidade"),I.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))))),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("h2",null,"Items de coleta"),l.a.createElement("span",null,"Selecione um ou mais itens abaixo")),l.a.createElement("ul",{className:"items-grid"},a.map((function(e){return l.a.createElement("li",{className:p.includes(e.id)?"selected":"",key:e.id,onClick:function(){return function(e){if(p.findIndex((function(t){return t===e}))>=0){var t=p.filter((function(t){return t!==e}));d(t)}else d([].concat(Object(b.a)(p),[e]))}(e.id)}},l.a.createElement("img",{src:e.image_url,alt:e.title}),l.a.createElement("span",null,e.title))})))),l.a.createElement("button",{type:"submit"},"Cadastrar ponto de coleta")))},F=function(e){return l.a.createElement(r.a,null,l.a.createElement(i.a,{exact:!0,path:"/",component:p}),l.a.createElement(i.a,{path:"/create-point",component:x}))};var U=function(){return l.a.createElement(F,null)};o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(U,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.c3c97158.chunk.js.map